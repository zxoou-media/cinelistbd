<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CineListBD ‚ñ∂</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
<header class="site-header">
  <h1 id="site-title">‚ñ∂ CineList</h1>
  <nav><a href="#">Home</a></nav>

  <!-- üîç Search + Dark Mode -->
  <div class="search-row">
    <input type="text" id="search-box" placeholder="üîç Search movies..." />
    <button id="theme-toggle">üåô Dark Mode</button>
  </div>

  <!-- üéõÔ∏è Filter Buttons -->
  <div class="filter-row">
    <!-- ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ filter rows ‡¶è‡¶ñ‡¶æ‡¶®‡ßá Í∑∏ÎåÄÎ°ú ‡¶•‡¶æ‡¶ï‡¶¨‡ßá -->
    <!-- Section, Platform, Genre, Language, Type, Quality filters -->
  </div>
</header>

<main>
  <!-- üîÅ Dynamic Section Rendering -->
  <div class="section-wrapper">
    {% for section in sections %}
      {% if section.title == "Trending" %}
        <div class="section">
          <div class="section-heading-wrapper">
            <h2>üî• {{ section.title }}</h2>
          </div>
          <div id="trending-scroll" class="scroll-row">
            {% for movie in section.movies[:20] %}
              <div class="movie-card">
                <img src="{{ movie.poster }}" alt="{{ movie.title }}" loading="lazy"
                     onerror="this.onerror=null;this.src='/static/img/fallback.jpg';" />
                <h3>{{ movie.title }}</h3>
                <p>
                  {% if movie.lang %}{{ movie.lang | join(', ') }}{% endif %}
                  {% if movie.quality %} | {{ movie.quality | join(', ') }}{% endif %}
                </p>
                {% if movie.trailer %}
                  <a href="{{ movie.trailer }}" target="_blank">Watch Trailer</a>
                {% endif %}
              </div>
            {% endfor %}
          </div>
          {% if section.movies|length > 20 %}
            <div class="see-more-wrapper">
              <button class="see-more-btn" data-section="trending">See More</button>
            </div>
          {% endif %}
        </div>
      {% else %}
        <div class="section">
          <div class="section-heading-wrapper">
            <h2>{{ section.title }}</h2>
          </div>
          <div class="movie-grid">
            {% for movie in section.movies[:20] %}
              <div class="movie-card">
                <img src="{{ movie.poster }}" alt="{{ movie.title }}" loading="lazy"
                     onerror="this.onerror=null;this.src='/static/img/fallback.jpg';" />
                <h3>{{ movie.title }}</h3>
                <p>
                  {% if movie.lang %}{{ movie.lang | join(', ') }}{% endif %}
                  {% if movie.quality %} | {{ movie.quality | join(', ') }}{% endif %}
                </p>
                {% if movie.trailer %}
                  <a href="{{ movie.trailer }}" target="_blank">Watch Trailer</a>
                {% endif %}
              </div>
            {% endfor %}
          </div>
          {% if section.movies|length > 20 %}
            <div class="see-more-wrapper">
              <button class="see-more-btn" data-section="{{ section.title | lower | replace(' ', '') }}">See More</button>
            </div>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <!-- üîÅ Pagination -->
  <div class="pagination">
    {% if current_page > 1 %}
      <a href="{{ url_for('section_page', page=current_page - 1) }}" class="page-btn">Previous</a>
    {% endif %}

    {% for page_num in page_range %}
      <a href="{{ url_for('section_page', page=page_num) }}"
         class="page-btn {% if page_num == current_page %}active{% endif %}">
         {{ page_num }}
      </a>
    {% endfor %}

    {% if current_page < total_pages %}
      <a href="{{ url_for('section_page', page=current_page + 1) }}" class="page-btn">Next</a>
    {% endif %}
  </div>
</main>

<footer>
  <p>¬© 2025 CineList ‚Äî ‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶≤‡¶ø‡¶ï ‡¶§‡¶æ‡¶®‡¶ú‡¶ø‡¶¶‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶æ‡¶® ‡¶ú‡ßü ‡¶≠‡¶æ‡¶á</p>
</footer>

<script src="{{ url_for('static', filename='script.js') }}"></script>
<script>
  // üîÅ Auto-scroll for trending section
  setInterval(() => {
    const scrollContainer = document.getElementById('trending-scroll');
    if (scrollContainer) {
      scrollContainer.scrollLeft += 1;
    }
  }, 30);
</script>
</body>
</html>